<!DOCTYPE html>
<html>
<head>
  <title>AI Website Builder</title>
  <style>
    body{font-family:sans-serif;background:#0f172a;color:white;padding:20px}
    textarea{width:100%;height:120px}
    iframe{width:100%;height:500px;border:1px solid #334155}
    button{padding:10px 20px;margin:10px 0}
  </style>
</head>
<body>

<h1>AI Website Builder</h1>

<select id="mode">
  <option value="preview">Live Preview</option>
  <option value="export">Download Multi-Page Website</option>
</select>

<textarea id="prompt" placeholder="Describe your website..."></textarea>

<button onclick="generate()">Generate</button>

<div id="info"></div>
<iframe id="preview"></iframe>

<script>
async function generate(){
  const prompt = document.getElementById("prompt").value;
  const mode = document.getElementById("mode").value;

  if(mode === "preview"){
    const r = await fetch("/preview", {
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({prompt})
    });
    const d = await r.json();
    preview.srcdoc = d.html;
    info.innerHTML = "";
  }

  if(mode === "export"){
    preview.srcdoc = `
      <h2 style="padding:40px">
      Preview disabled for multi-page websites.<br>
      Click below to download.
      </h2>`;
    const r = await fetch("/export", {
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({prompt})
    });
    const d = await r.json();
    info.innerHTML = `<a href="${d.download}" download>â¬‡ Download Website ZIP</a>`;
  }
}
</script>

</body>
</html>
